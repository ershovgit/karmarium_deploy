class t{constructor(t,{quantity:a=30,staticity:i=50,ease:s=50}={}){if(this.canvas=t,!this.canvas)return;this.canvasContainer=this.canvas.parentElement,this.context=this.canvas.getContext("2d"),this.dpr=window.devicePixelRatio||1,this.settings={quantity:a,staticity:i,ease:s},this.circles=[],this.mouse={x:0,y:0},this.canvasSize={w:0,h:0},this.onMouseMove=this.onMouseMove.bind(this),this.initCanvas=this.initCanvas.bind(this),this.resizeCanvas=this.resizeCanvas.bind(this),this.drawCircle=this.drawCircle.bind(this),this.drawParticles=this.drawParticles.bind(this),this.remapValue=this.remapValue.bind(this),this.animate=this.animate.bind(this),this.init()}init(){this.initCanvas(),this.animate(),window.addEventListener("resize",this.initCanvas),window.addEventListener("mousemove",this.onMouseMove)}initCanvas(){this.resizeCanvas(),this.drawParticles()}onMouseMove(t){let{clientX:a,clientY:i}=t,s=this.canvas.getBoundingClientRect(),{w:e,h}=this.canvasSize,n=a-s.left-e/2,r=i-s.top-h/2;n<e/2&&n>-(e/2)&&r<h/2&&r>-(h/2)&&(this.mouse.x=n,this.mouse.y=r)}resizeCanvas(){this.circles.length=0,this.canvasSize.w=this.canvasContainer.offsetWidth,this.canvasSize.h=this.canvasContainer.offsetHeight,this.canvas.width=this.canvasSize.w*this.dpr,this.canvas.height=this.canvasSize.h*this.dpr,this.canvas.style.width=this.canvasSize.w+"px",this.canvas.style.height=this.canvasSize.h+"px",this.context.scale(this.dpr,this.dpr)}circleParams(){let t=Math.floor(Math.random()*this.canvasSize.w);return{x:t,y:Math.floor(Math.random()*this.canvasSize.h),translateX:0,translateY:0,size:Math.floor(2*Math.random())+1,alpha:0,targetAlpha:parseFloat((.6*Math.random()+.1).toFixed(1)),dx:(Math.random()-.5)*.2,dy:(Math.random()-.5)*.2,magnetism:.1+4*Math.random()}}drawCircle(t,a=!1){let{x:i,y:s,translateX:e,translateY:h,size:n,alpha:r}=t;this.context.translate(e,h),this.context.beginPath(),this.context.arc(i,s,n,0,2*Math.PI),this.context.fillStyle=`rgba(255, 255, 255, ${r})`,this.context.fill(),this.context.setTransform(this.dpr,0,0,this.dpr,0,0),a||this.circles.push(t)}clearContext(){this.context.clearRect(0,0,this.canvasSize.w,this.canvasSize.h)}drawParticles(){this.clearContext();let t=this.settings.quantity;for(let a=0;a<t;a++){let t=this.circleParams();this.drawCircle(t)}}remapValue(t,a,i,s,e){let h=(t-a)*(e-s)/(i-a)+s;return h>0?h:0}animate(){this.clearContext(),this.circles.forEach((t,a)=>{let i=[t.x+t.translateX-t.size,this.canvasSize.w-t.x-t.translateX-t.size,t.y+t.translateY-t.size,this.canvasSize.h-t.y-t.translateY-t.size].reduce((t,a)=>Math.min(t,a)),s=this.remapValue(i,0,20,0,1).toFixed(2);if(s>1?(t.alpha+=.02,t.alpha>t.targetAlpha&&(t.alpha=t.targetAlpha)):t.alpha=t.targetAlpha*s,t.x+=t.dx,t.y+=t.dy,t.translateX+=(this.mouse.x/(this.settings.staticity/t.magnetism)-t.translateX)/this.settings.ease,t.translateY+=(this.mouse.y/(this.settings.staticity/t.magnetism)-t.translateY)/this.settings.ease,t.x<-t.size||t.x>this.canvasSize.w+t.size||t.y<-t.size||t.y>this.canvasSize.h+t.size){this.circles.splice(a,1);let t=this.circleParams();this.drawCircle(t)}else this.drawCircle({...t,x:t.x,y:t.y,translateX:t.translateX,translateY:t.translateY,alpha:t.alpha},!0)}),window.requestAnimationFrame(this.animate)}}document.querySelectorAll("[data-particle-animation]").forEach(a=>{let i={quantity:a.dataset.particleQuantity,staticity:a.dataset.particleStaticity,ease:a.dataset.particleEase};new t(a,i)});